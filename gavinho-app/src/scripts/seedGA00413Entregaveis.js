// Script para inserir entreg√°veis do Projeto Base - GA00413+414 (Oeiras House S+K)
// Execute este script atrav√©s da p√°gina AdminSeed

export const entregaveisGA00413ProjetoBase = [
  // ========== 01 DESENHOS GERAIS ==========

  // 01.01 Existente - Projeto Licenciado
  { codigo: '01.01.01', nome: 'Planta Existente - Piso -2', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.02', nome: 'Planta Existente - Piso -1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.03', nome: 'Planta Existente - Piso 0', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.04', nome: 'Planta Existente - Piso 1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.05', nome: 'Planta Existente - Cobertura', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.06', nome: 'Existente - Corte AA', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.07', nome: 'Existente - Corte BB', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.08', nome: 'Existente - Al√ßado Norte', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.09', nome: 'Existente - Al√ßado Sul', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.10', nome: 'Existente - Al√ßado Este', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.01.11', nome: 'Existente - Al√ßado Oeste', escala: '1/100', categoria: 'DESENHOS GERAIS' },

  // 01.02 Cores Convencionais
  { codigo: '01.02.01', nome: 'Cores Convencionais - Piso -2', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.02', nome: 'Cores Convencionais - Piso -1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.03', nome: 'Cores Convencionais - Piso 0', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.04', nome: 'Cores Convencionais - Piso 1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.05', nome: 'Cores Convencionais - Cobertura', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.06', nome: 'Cores Convencionais - Corte AA', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.07', nome: 'Cores Convencionais - Corte BB', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.08', nome: 'Cores Convencionais - Al√ßado Norte', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.09', nome: 'Cores Convencionais - Al√ßado Sul', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.10', nome: 'Cores Convencionais - Al√ßado Este', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.02.11', nome: 'Cores Convencionais - Al√ßado Oeste', escala: '1/100', categoria: 'DESENHOS GERAIS' },

  // 01.03 Proposta
  { codigo: '01.03.01', nome: 'Levantamento Topogr√°fico', escala: '1/500', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.02', nome: 'Planta de Implanta√ß√£o - Piso 0', escala: '1/200', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.03', nome: 'Planta de Implanta√ß√£o - Cobertura', escala: '1/200', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.04', nome: 'Planta Proposta - Piso -2', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.05', nome: 'Planta Proposta - Piso -1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.06', nome: 'Planta Proposta - Piso 0', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.07', nome: 'Planta Proposta - Piso 1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.08', nome: 'Planta Proposta - Cobertura', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.09', nome: 'Corte AA', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.10', nome: 'Corte BB', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.11', nome: 'Corte CC', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.12', nome: 'Corte DD', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.13', nome: 'Corte Construtivo', escala: '1/20', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.14', nome: 'Al√ßado Norte', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.15', nome: 'Al√ßado Sul', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.16', nome: 'Al√ßado Este', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.17', nome: 'Al√ßado Oeste', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.18', nome: 'Al√ßado Norte (com Muros)', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.19', nome: 'Al√ßado Sul (com Muros)', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.20', nome: 'Al√ßado Este (com Muros)', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.21', nome: 'Al√ßado Oeste (com Muros)', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.03.22', nome: 'Pormenor Muro de Veda√ß√£o', escala: '1/20', categoria: 'DESENHOS GERAIS' },

  // 01.04 Proposta com Mobili√°rio
  { codigo: '01.04.01', nome: 'Planta com Mobili√°rio - Piso -2', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.04.02', nome: 'Planta com Mobili√°rio - Piso -1', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.04.03', nome: 'Planta com Mobili√°rio - Piso 0', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.04.04', nome: 'Planta com Mobili√°rio - Piso 1', escala: '1/100', categoria: 'DESENHOS GERAIS' },

  // 01.05 Medi√ß√µes
  { codigo: '01.05.01', nome: 'Medi√ß√£o - Implanta√ß√£o', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.02', nome: 'Medi√ß√£o - Piso -2 | Superf√≠cie de Pavimento', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.03', nome: 'Medi√ß√£o - Piso -1 | Superf√≠cie de Pavimento', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.04', nome: 'Medi√ß√£o - Piso 0 | Superf√≠cie de Pavimento', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.05', nome: 'Medi√ß√£o - Piso 1 | Superf√≠cie de Pavimento', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.06', nome: 'Medi√ß√£o - Cobertura | Superf√≠cie de Pavimento', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.07', nome: 'Medi√ß√£o - Piso -2 | √Årea de Constru√ß√£o', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.08', nome: 'Medi√ß√£o - Piso -1 | √Årea de Constru√ß√£o', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.09', nome: 'Medi√ß√£o - Piso 0 | √Årea de Constru√ß√£o', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.10', nome: 'Medi√ß√£o - Piso 1 | √Årea de Constru√ß√£o', escala: '1/100', categoria: 'DESENHOS GERAIS' },
  { codigo: '01.05.11', nome: 'Medi√ß√£o - Cobertura | √Årea de Constru√ß√£o', escala: '1/100', categoria: 'DESENHOS GERAIS' },

  // ========== 02 ACESSIBILIDADES ==========
  { codigo: '02.01.01', nome: 'Lista de Layers', escala: '-', categoria: 'ACESSIBILIDADES' },
  { codigo: '02.01.02', nome: 'Planta de Acessibilidades - Piso -2', escala: '1/100', categoria: 'ACESSIBILIDADES' },
]

// Fun√ß√£o para inserir os entreg√°veis
export async function seedGA00413Entregaveis(supabase, addLog = console.log) {
  // 1. Encontrar o projeto GA00413+414
  addLog('üîç Procurando projeto GA00413+414...', 'info')

  const { data: projeto, error: projetoError } = await supabase
    .from('projetos')
    .select('id, codigo, nome')
    .eq('codigo', 'GA00413+414')
    .single()

  if (projetoError || !projeto) {
    addLog('‚ùå Projeto GA00413+414 n√£o encontrado!', 'error')
    throw new Error('Projeto GA00413+414 n√£o encontrado')
  }

  addLog(`‚úÖ Projeto encontrado: ${projeto.nome} (ID: ${projeto.id})`, 'success')

  // 2. Remover entreg√°veis existentes do Projeto Base
  addLog('üóëÔ∏è Removendo entreg√°veis existentes do Projeto Base...', 'info')

  const { error: deleteError } = await supabase
    .from('projeto_entregaveis')
    .delete()
    .eq('projeto_id', projeto.id)
    .eq('fase', 'Projeto Base')

  if (deleteError) {
    addLog(`‚ö†Ô∏è Erro ao remover entreg√°veis: ${deleteError.message}`, 'warning')
  } else {
    addLog('‚úÖ Entreg√°veis anteriores removidos', 'success')
  }

  // 3. Inserir novos entreg√°veis
  addLog(`üìù Inserindo ${entregaveisGA00413ProjetoBase.length} entreg√°veis...`, 'info')

  let inserted = 0
  let errors = 0

  for (const ent of entregaveisGA00413ProjetoBase) {
    const { error } = await supabase.from('projeto_entregaveis').insert({
      projeto_id: projeto.id,
      fase: 'Projeto Base',
      categoria: ent.categoria,
      codigo: ent.codigo,
      nome: ent.nome,
      escala: ent.escala,
      status: 'pendente',
      data_inicio: null,
      data_conclusao: null,
      executante: null
    })

    if (error) {
      console.error('Erro ao inserir:', ent.codigo, error)
      errors++
    } else {
      inserted++
    }
  }

  addLog(`‚úÖ ${inserted} entreg√°veis inseridos com sucesso!`, 'success')
  if (errors > 0) {
    addLog(`‚ö†Ô∏è ${errors} erros durante a inser√ß√£o`, 'warning')
  }

  return { inserted, errors, total: entregaveisGA00413ProjetoBase.length }
}
